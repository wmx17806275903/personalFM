!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("ngx-echarts",["exports","@angular/core","rxjs","rxjs/operators"],e):e((t=t||self)["ngx-echarts"]={},t.ng.core,t.rxjs,t.rxjs.operators)}(this,(function(t,e,r,n){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function i(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s}function o(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(t){o(t)}}function a(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))}function s(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var a=function(){function t(t){this.changes=t}return t.of=function(e){return new t(e)},t.prototype.notEmpty=function(t){if(this.changes[t]){var e=this.changes[t].currentValue;if(null!=e)return r.of(e)}return r.EMPTY},t.prototype.has=function(t){if(this.changes[t]){var e=this.changes[t].currentValue;return r.of(e)}return r.EMPTY},t.prototype.notFirst=function(t){if(this.changes[t]&&!this.changes[t].isFirstChange()){var e=this.changes[t].currentValue;return r.of(e)}return r.EMPTY},t.prototype.notFirstAndEmpty=function(t){if(this.changes[t]&&!this.changes[t].isFirstChange()){var e=this.changes[t].currentValue;if(null!=e)return r.of(e)}return r.EMPTY},t}(),c=new e.InjectionToken("NGX_ECHARTS_CONFIG"),h=function(){function t(t,r,n){this.el=r,this.ngZone=n,this.autoResize=!0,this.loadingType="default",this.chartInit=new e.EventEmitter,this.optionsError=new e.EventEmitter,this.chartClick=this.createLazyEvent("click"),this.chartDblClick=this.createLazyEvent("dblclick"),this.chartMouseDown=this.createLazyEvent("mousedown"),this.chartMouseMove=this.createLazyEvent("mousemove"),this.chartMouseUp=this.createLazyEvent("mouseup"),this.chartMouseOver=this.createLazyEvent("mouseover"),this.chartMouseOut=this.createLazyEvent("mouseout"),this.chartGlobalOut=this.createLazyEvent("globalout"),this.chartContextMenu=this.createLazyEvent("contextmenu"),this.chartLegendSelectChanged=this.createLazyEvent("legendselectchanged"),this.chartLegendSelected=this.createLazyEvent("legendselected"),this.chartLegendUnselected=this.createLazyEvent("legendunselected"),this.chartLegendScroll=this.createLazyEvent("legendscroll"),this.chartDataZoom=this.createLazyEvent("datazoom"),this.chartDataRangeSelected=this.createLazyEvent("datarangeselected"),this.chartTimelineChanged=this.createLazyEvent("timelinechanged"),this.chartTimelinePlayChanged=this.createLazyEvent("timelineplaychanged"),this.chartRestore=this.createLazyEvent("restore"),this.chartDataViewChanged=this.createLazyEvent("dataviewchanged"),this.chartMagicTypeChanged=this.createLazyEvent("magictypechanged"),this.chartPieSelectChanged=this.createLazyEvent("pieselectchanged"),this.chartPieSelected=this.createLazyEvent("pieselected"),this.chartPieUnselected=this.createLazyEvent("pieunselected"),this.chartMapSelectChanged=this.createLazyEvent("mapselectchanged"),this.chartMapSelected=this.createLazyEvent("mapselected"),this.chartMapUnselected=this.createLazyEvent("mapunselected"),this.chartAxisAreaSelected=this.createLazyEvent("axisareaselected"),this.chartFocusNodeAdjacency=this.createLazyEvent("focusnodeadjacency"),this.chartUnfocusNodeAdjacency=this.createLazyEvent("unfocusnodeadjacency"),this.chartBrush=this.createLazyEvent("brush"),this.chartBrushEnd=this.createLazyEvent("brushend"),this.chartBrushSelected=this.createLazyEvent("brushselected"),this.chartRendered=this.createLazyEvent("rendered"),this.chartFinished=this.createLazyEvent("finished"),this.currentOffsetWidth=0,this.currentOffsetHeight=0,this.echarts=t.echarts}var h,u;return t.prototype.ngOnChanges=function(t){var e=this,r=a.of(t);r.notFirstAndEmpty("options").subscribe((function(t){return e.onOptionsChange(t)})),r.notFirstAndEmpty("merge").subscribe((function(t){return e.setOption(t)})),r.has("loading").subscribe((function(t){return e.toggleLoading(!!t)})),r.notFirst("theme").subscribe((function(){return e.refreshChart()}))},t.prototype.ngOnInit=function(){var t=this;this.resizeSub=r.fromEvent(window,"resize").pipe(n.debounceTime(50)).subscribe((function(){t.autoResize&&window.innerWidth!==t.currentWindowWidth&&(t.currentWindowWidth=window.innerWidth,t.currentOffsetWidth=t.el.nativeElement.offsetWidth,t.currentOffsetHeight=t.el.nativeElement.offsetHeight,t.resize())}))},t.prototype.ngOnDestroy=function(){this.resizeSub&&this.resizeSub.unsubscribe(),this.dispose()},t.prototype.ngDoCheck=function(){if(this.chart&&this.autoResize){var t=this.el.nativeElement.offsetWidth,e=this.el.nativeElement.offsetHeight;this.currentOffsetWidth===t&&this.currentOffsetHeight===e||(this.currentOffsetWidth=t,this.currentOffsetHeight=e,this.resize())}},t.prototype.ngAfterViewInit=function(){var t=this;setTimeout((function(){return t.initChart()}))},t.prototype.dispose=function(){this.chart&&(this.chart.dispose(),this.chart=null)},t.prototype.resize=function(){this.chart&&this.chart.resize()},t.prototype.toggleLoading=function(t){this.chart&&(t?this.chart.showLoading(this.loadingType,this.loadingOpts):this.chart.hideLoading())},t.prototype.setOption=function(t,e){if(this.chart)try{this.chart.setOption(t,e)}catch(t){console.error(t),this.optionsError.emit(t)}},t.prototype.refreshChart=function(){return o(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return this.dispose(),[4,this.initChart()];case 1:return t.sent(),[2]}}))}))},t.prototype.createChart=function(){var t=this;this.currentWindowWidth=window.innerWidth,this.currentOffsetWidth=this.el.nativeElement.offsetWidth,this.currentOffsetHeight=this.el.nativeElement.offsetHeight;var e=this.el.nativeElement;if(window&&window.getComputedStyle){var r=window.getComputedStyle(e,null).getPropertyValue("height");r&&"0px"!==r||e.style.height&&"0px"!==e.style.height||(e.style.height="400px")}return this.ngZone.runOutsideAngular((function(){return("function"==typeof t.echarts?t.echarts:function(){return Promise.resolve(t.echarts)})().then((function(r){return(0,r.init)(e,t.theme,t.initOpts)}))}))},t.prototype.initChart=function(){return o(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.onOptionsChange(this.options)];case 1:return t.sent(),this.merge&&this.chart&&this.setOption(this.merge),[2]}}))}))},t.prototype.onOptionsChange=function(t){return o(this,void 0,void 0,(function(){var e;return s(this,(function(r){switch(r.label){case 0:return t?this.chart?(this.setOption(this.options,!0),[3,3]):[3,1]:[2];case 1:return e=this,[4,this.createChart()];case 2:e.chart=r.sent(),this.chartInit.emit(this.chart),this.setOption(this.options,!0),r.label=3;case 3:return[2]}}))}))},t.prototype.createLazyEvent=function(t){var e=this;return this.chartInit.pipe(n.switchMap((function(n){return new r.Observable((function(r){return n.on(t,(function(t){return e.ngZone.run((function(){return r.next(t)}))})),function(){return n.off(t)}}))})))},t.ctorParameters=function(){return[{type:void 0,decorators:[{type:e.Inject,args:[c]}]},{type:e.ElementRef},{type:e.NgZone}]},i([e.Input()],t.prototype,"options",void 0),i([e.Input()],t.prototype,"theme",void 0),i([e.Input()],t.prototype,"loading",void 0),i([e.Input()],t.prototype,"initOpts",void 0),i([e.Input()],t.prototype,"merge",void 0),i([e.Input()],t.prototype,"autoResize",void 0),i([e.Input()],t.prototype,"loadingType",void 0),i([e.Input()],t.prototype,"loadingOpts",void 0),i([e.Output()],t.prototype,"chartInit",void 0),i([e.Output()],t.prototype,"optionsError",void 0),i([e.Output()],t.prototype,"chartClick",void 0),i([e.Output()],t.prototype,"chartDblClick",void 0),i([e.Output()],t.prototype,"chartMouseDown",void 0),i([e.Output()],t.prototype,"chartMouseMove",void 0),i([e.Output()],t.prototype,"chartMouseUp",void 0),i([e.Output()],t.prototype,"chartMouseOver",void 0),i([e.Output()],t.prototype,"chartMouseOut",void 0),i([e.Output()],t.prototype,"chartGlobalOut",void 0),i([e.Output()],t.prototype,"chartContextMenu",void 0),i([e.Output()],t.prototype,"chartLegendSelectChanged",void 0),i([e.Output()],t.prototype,"chartLegendSelected",void 0),i([e.Output()],t.prototype,"chartLegendUnselected",void 0),i([e.Output()],t.prototype,"chartLegendScroll",void 0),i([e.Output()],t.prototype,"chartDataZoom",void 0),i([e.Output()],t.prototype,"chartDataRangeSelected",void 0),i([e.Output()],t.prototype,"chartTimelineChanged",void 0),i([e.Output()],t.prototype,"chartTimelinePlayChanged",void 0),i([e.Output()],t.prototype,"chartRestore",void 0),i([e.Output()],t.prototype,"chartDataViewChanged",void 0),i([e.Output()],t.prototype,"chartMagicTypeChanged",void 0),i([e.Output()],t.prototype,"chartPieSelectChanged",void 0),i([e.Output()],t.prototype,"chartPieSelected",void 0),i([e.Output()],t.prototype,"chartPieUnselected",void 0),i([e.Output()],t.prototype,"chartMapSelectChanged",void 0),i([e.Output()],t.prototype,"chartMapSelected",void 0),i([e.Output()],t.prototype,"chartMapUnselected",void 0),i([e.Output()],t.prototype,"chartAxisAreaSelected",void 0),i([e.Output()],t.prototype,"chartFocusNodeAdjacency",void 0),i([e.Output()],t.prototype,"chartUnfocusNodeAdjacency",void 0),i([e.Output()],t.prototype,"chartBrush",void 0),i([e.Output()],t.prototype,"chartBrushEnd",void 0),i([e.Output()],t.prototype,"chartBrushSelected",void 0),i([e.Output()],t.prototype,"chartRendered",void 0),i([e.Output()],t.prototype,"chartFinished",void 0),t=i([e.Directive({selector:"echarts, [echarts]",exportAs:"echarts"}),(h=0,u=e.Inject(c),function(t,e){u(t,e,h)})],t)}(),u=function(){function t(){}var r;return r=t,t.forRoot=function(t){return{ngModule:r,providers:[{provide:c,useValue:t}]}},t.forChild=function(){return{ngModule:r}},t=r=i([e.NgModule({imports:[],declarations:[h],exports:[h]})],t)}();t.NGX_ECHARTS_CONFIG=c,t.NgxEchartsDirective=h,t.NgxEchartsModule=u,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-echarts.umd.min.js.map